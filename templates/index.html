<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Task List</title>
    <script defer src="{{ url_for('static', filename='tasks.js') }}"></script>
</head>
<body>
    <h1 id="main-header">My Tasks</h1>

    
    <form method="POST" action="/tasks" id="add-form">
        <input type="text" name="title" placeholder="Task title" required />
        <select name="priority" required>
            <option value="">Priority</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
        </select>
        <button type="submit">Add Task</button>
    </form>

   
    <ul id="task-list">
        {% for task in tasks %}
            <li>
                <strong>{{ task[1] }}</strong> — 
                Priority: {{ task[3] or 'None' }} — 
                Created: {{ task[4] }} — 
                {% if task[2] %}
                    <em>(Done)</em>
                {% else %}
                    <em>(Pending)</em>
                {% endif %}

                
                <button
                    class="edit-btn"
                    data-task-id="{{ task[0] }}"
                    data-title="{{ task[1] }}"
                    data-done="{{ 1 if task[2] else 0 }}"
                    data-priority="{{ task[3] }}"
                >Edit</button>

                
                <form method="POST" action="/delete/{{ task[0] }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this task?');">
                        Delete
                    </button>
                </form>
            </li>
        {% else %}
            <li>No tasks yet!</li>
        {% endfor %}
    </ul>

    
    <div id="edit-wrapper" style="display:none;">
        <form method="POST" id="edit-form">
            <input type="text" name="title" id="edit-title" required />
            <select name="priority" id="edit-priority" required>
                <option value="">Priority</option>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
            <label>
                <input type="checkbox" name="done" id="edit-done" /> Done
            </label>
            <button type="submit">Save</button>
            <button type="button" id="cancel-edit">Cancel</button>
        </form>
    </div>
</body>
</html>
